<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * Backbone localStorage Adapter
 * Version 1.1.6
 *
 * https://github.com/jeromegn/Backbone.localStorage
 */(function(a,b){typeof exports==&quot;object&quot;&amp;&amp;a.require?module.exports=b(require(&quot;underscore&quot;),require(&quot;backbone&quot;)):typeof define==&quot;function&quot;&amp;&amp;define.amd?define([&quot;underscore&quot;,&quot;backbone&quot;],function(c,d){return b(c||a._,d||a.Backbone)}):b(_,Backbone)})(this,function(a,b){function c(){return((1+Math.random())*65536|0).toString(16).substring(1)}function d(){return c()+c()+&quot;-&quot;+c()+&quot;-&quot;+c()+&quot;-&quot;+c()+&quot;-&quot;+c()+c()+c()}return b.LocalStorage=window.Store=function(a){if(!this.localStorage)throw&quot;Backbone.localStorage: Environment does not support localStorage.&quot;;this.name=a;var b=this.localStorage().getItem(this.name);this.records=b&amp;&amp;b.split(&quot;,&quot;)||[]},a.extend(b.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(&quot;,&quot;))},create:function(a){return a.id||(a.id=d(),a.set(a.idAttribute,a.id)),this.localStorage().setItem(this.name+&quot;-&quot;+a.id,JSON.stringify(a)),this.records.push(a.id.toString()),this.save(),this.find(a)},update:function(b){return this.localStorage().setItem(this.name+&quot;-&quot;+b.id,JSON.stringify(b)),a.include(this.records,b.id.toString())||this.records.push(b.id.toString()),this.save(),this.find(b)},find:function(a){return this.jsonData(this.localStorage().getItem(this.name+&quot;-&quot;+a.id))},findAll:function(){return(a.chain||a)(this.records).map(function(a){return this.jsonData(this.localStorage().getItem(this.name+&quot;-&quot;+a))},this).compact().value()},destroy:function(b){return b.isNew()?!1:(this.localStorage().removeItem(this.name+&quot;-&quot;+b.id),this.records=a.reject(this.records,function(a){return a===b.id.toString()}),this.save(),b)},localStorage:function(){return localStorage},jsonData:function(a){return a&amp;&amp;JSON.parse(a)},_clear:function(){var b=this.localStorage(),c=new RegExp(&quot;^&quot;+this.name+&quot;-&quot;);b.removeItem(this.name),(a.chain||a)(b).keys().filter(function(a){return c.test(a)}).each(function(a){b.removeItem(a)}),this.records.length=0},_storageSize:function(){return this.localStorage().length}}),b.LocalStorage.sync=window.Store.sync=b.localSync=function(a,c,d){var e=c.localStorage||c.collection.localStorage,f,g,h=b.$.Deferred&amp;&amp;b.$.Deferred();try{switch(a){case&quot;read&quot;:f=c.id!=undefined?e.find(c):e.findAll();break;case&quot;create&quot;:f=e.create(c);break;case&quot;update&quot;:f=e.update(c);break;case&quot;delete&quot;:f=e.destroy(c)}}catch(i){i.code===22&amp;&amp;e._storageSize()===0?g=&quot;Private browsing is unsupported&quot;:g=i.message}return f?(d&amp;&amp;d.success&amp;&amp;(b.VERSION===&quot;0.9.10&quot;?d.success(c,f,d):d.success(f)),h&amp;&amp;h.resolve(f)):(g=g?g:&quot;Record Not Found&quot;,d&amp;&amp;d.error&amp;&amp;(b.VERSION===&quot;0.9.10&quot;?d.error(c,g,d):d.error(g)),h&amp;&amp;h.reject(g)),d&amp;&amp;d.complete&amp;&amp;d.complete(f),h&amp;&amp;h.promise()},b.ajaxSync=b.sync,b.getSyncMethod=function(a){return a.localStorage||a.collection&amp;&amp;a.collection.localStorage?b.localSync:b.ajaxSync},b.sync=function(a,c,d){return b.getSyncMethod(c).apply(this,[a,c,d])},b.LocalStorage});</pre>
</body>
</html>
