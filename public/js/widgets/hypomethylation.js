define(["iris", "jquery", "underscore", "renderers/heatmap"],
function (Iris, $, _, Heatmap) {
    var HYPO_DATA = [[0,0,530],[0,1,30],[0,10,131],[0,2,14],[0,3,17],[0,4,18],[0,5,23],[0,6,15],[0,7,19],[0,8,29],[0,9,60],[1,0,35],[1,1,7],[1,10,14],[1,3,3],[1,4,1],[1,5,3],[1,6,2],[1,7,3],[1,8,2],[1,9,4],[10,0,1882],[10,1,254],[10,10,15582],[10,2,168],[10,3,135],[10,4,140],[10,5,183],[10,6,269],[10,7,521],[10,8,1237],[10,9,4671],[2,0,33],[2,1,6],[2,10,13],[2,2,8],[2,3,4],[2,4,2],[2,5,2],[2,6,4],[2,7,2],[2,8,4],[2,9,10],[3,0,34],[3,1,6],[3,10,21],[3,2,3],[3,3,4],[3,4,2],[3,5,5],[3,6,1],[3,7,2],[3,8,6],[3,9,16],[4,0,36],[4,1,3],[4,10,26],[4,2,4],[4,3,1],[4,4,4],[4,5,1],[4,7,1],[4,8,1],[4,9,10],[5,0,40],[5,1,2],[5,10,20],[5,2,3],[5,3,2],[5,4,5],[5,5,4],[5,6,3],[5,7,5],[5,8,6],[5,9,9],[6,0,51],[6,1,3],[6,10,31],[6,2,1],[6,4,2],[6,5,2],[6,6,11],[6,7,3],[6,8,7],[6,9,9],[7,0,51],[7,1,4],[7,10,33],[7,2,10],[7,3,3],[7,4,2],[7,6,7],[7,7,16],[7,8,6],[7,9,15],[8,0,61],[8,1,11],[8,10,50],[8,2,3],[8,3,1],[8,4,6],[8,5,2],[8,6,7],[8,7,11],[8,8,37],[8,9,31],[9,0,100],[9,1,13],[9,10,135],[9,2,8],[9,3,7],[9,4,5],[9,5,4],[9,6,14],[9,7,31],[9,8,66],[9,9,198]];
    var Widget = Iris.Widget.extend({
        about: {
            title: "Conservation vs. Hypomethylation",
            name: "hypomethylation",
            author: "Shiran Pasternak"
        },
        display: function (args) {
            args = (args || {});
            var heatmap = new Heatmap({
                element: this.element,
                colorscheme: "Spectral",
                borderWidth: 2
            });
            heatmap.setData({
                rows:    _.range(11),
                columns: _.range(11),
                matrix:  HYPO_DATA,
                maxScore: 255
                // _.max(_.map(HYPO_DATA, function (t) { return t[2] }))
            });
            heatmap.render();
        }
    });
    return Widget;
});